# HALO 4.1 发布说明

**软件更新 | 2025 年 7月**  
**仅供研究使用**

---

## HALO v4.1.5944.271

### bug修复
- 优化批量分析时的标注加载通知机制，避免系统耗尽 Windows 句柄的问题。现在会每隔约 5 秒显示一次剩余待加载图像数量的通知，并在全部标注加载完成后自动关闭该通知，从而防止崩溃并提升批量分析的稳定性。
- 统一并完善分析任务完成时的结果自动打开逻辑。避免了结果丢失或标记错乱的情况。
- 修正了调整直方图查看器窗口大小时无法随窗口一起调整。现在，范围控制会随直方图查看器窗口正常缩放。
- 优化了在加载已保存的聚类结果（Clusteing result）后再次运行分析的UMAP报错。
- 优化了RTT时发生的OpenGL报错，并提升性能。
- 优化了空间分析密度热图（Spatial Analysis Density Heatmap）的计算方式，避免在处理超大分析区域（ROA）时一次性计算整个热图导致 HALO 崩溃的问题。
- 优化高分辨率大尺寸图像，解决在高倍缩放（约 20x–40x）浏览图像时，显存（VRAM）快速占满并溢出到系统内存，导致内存持续攀升且无法及时释放的问题。
- 将 Threshold Assist 窗口设置为“始终置顶”，避免其在切回 HALO 主窗口时被遮挡。现在，该窗口在使用过程中会始终保持在最前方显示。
- 优化 Threshold Assist 直方图的构建方式，现在直方图在不同本地化环境中显示一致，仅在分隔符显示上根据所选本地化进行调整。
- 改进 BIF 图像的显示方式，使其与 NDPI 等其他格式一致。
- 优化了文件监控（File Monitor）。
- 优化了图像导出以及高分辨率图像导出逻辑。
- 更新安装程序，优化MySQL密码加密，以符合 MySQL 默认安全策略。
- 优化视图设置（View Settings）导入与保存逻辑。同时新增了验证机制，方便用户发现并确认设置同步状态。
- 解决了MSI 文件哈希错误导致 HALO 安装失败的问题。
- 解决了部分CZI图片无法读取，显示以及处理的问题。
- 提升包含 FL Phenotyper 的分析流Pipline性能。
- 移除了Grpc配置，从而确保 HALO 能正常进行身份验证。
- 增加了 'Unknown' 标签，从而避免错误并确保分析能顺利完成。
- 解决了在更新后的 Muscle Fiber 模块中，将膜分割类型（Membrane Segmentation）设为“Traditional”后保存设置，再重新加载时错误地显示为 “AI Custom” 的问题。现在保存的膜分割类型可正确恢复，且不会被更改。
- 修正了空间分析（Spatial Analysis）标记错位的问题。
- 优化 TMA 模块缩略图加载逻辑，避免因在主线程加载耗时缩略图或重复加载失败图像而导致界面卡顿或假死，并确保失败通知仅显示一次。
- 确保在 Highplex 模块在可下载或已安装的情况下，Threshold Assist 功能始终可用。
- 在Cluster UMAP 中可通过右键菜单切换图例显示，以避免大量Cluster图例遮挡图表。
- 优化 Wave 2 AI 。
- 修复 Densenet、Phenotyper 和 Nuc Seg AI 应用在训练时发生部分错误的问题
- 在 OME-TIFF 读取器中增加对报告 16 位但实际为 8 位的 Lunaphore 图像的支持。
- 修正在打开视图设置时部分报错。
- 提升重新配置过程的稳定性与可调试性。
- 在分析队列窗口新增选项，可关闭作业失败通知，以避免通知在所有已登录 HALO 用户界面上同时弹出。
- 修正部分UI以及文字。
- 优化 Threshold Assist 直方图构建逻辑。
### 新功能
- **暂无**

<!-- ##{"timestamp":1490764800}## -->